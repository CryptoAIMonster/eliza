
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>darwintree - GitHub Contributions</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <div id="root"><div class="max-w-7xl mx-auto p-4 space-y-6"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><img src="https://avatars.githubusercontent.com/u/17946284?v=4" alt="darwintree&#x27;s avatar" class="w-16 h-16 rounded-full"/><div><h1 class="text-2xl font-bold">darwintree</h1><div class="text-gray-600 dark:text-gray-400"><span class="font-semibold">Score: </span>82</div></div></div><div class="text-3xl font-bold text-blue-600 dark:text-blue-400">82</div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><p class="text-gray-700 dark:text-gray-300 text-sm leading-relaxed">Darwintree is actively developing the plugin-conflux feature set, focusing on adding support for confiPump and bridge transfer functionalities within Conflux. They are also addressing issues related to modelEndpointOverride not working correctly in generateObjectV2 and fixing errors when openai baseURL is missing or ignored.</p></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Commits</h3><p class="text-2xl font-bold">11</p></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Pull Requests</h3><p class="text-2xl font-bold">4</p></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Issues</h3><p class="text-2xl font-bold">2</p></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Comments</h3><p class="text-2xl font-bold">2</p></div></div><div class="space-y-4"><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Commits</h3><span>▶</span></div></div><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Pull Requests</h3><span>▶</span></div></div><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Issues</h3><span>▶</span></div></div><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Comments</h3><span>▶</span></div></div></div></div></div>
    <script>
        window.__DATA__ = {"contributor":"darwintree","score":82,"summary":"Darwintree is actively developing the plugin-conflux feature set, focusing on adding support for confiPump and bridge transfer functionalities within Conflux. They are also addressing issues related to modelEndpointOverride not working correctly in generateObjectV2 and fixing errors when openai baseURL is missing or ignored.","avatar_url":"https://avatars.githubusercontent.com/u/17946284?v=4","activity":{"code":{"total_commits":11,"total_prs":4,"commits":[{"sha":"7a2af46b9d6ed6bf34645c671516a56b9e98bc71","message":"fix: missed build option","created_at":"2024-11-25T07:58:15Z","additions":1,"deletions":0,"changed_files":1},{"sha":"6bab91305cc65cd959d8c2063914579fb92425c5","message":"feat(plugin-conflux): support confiPump","created_at":"2024-11-25T07:58:12Z","additions":2389,"deletions":8,"changed_files":12},{"sha":"d0494252b6979c2d187483e0988a94dc386135ce","message":"feat(plugin-conflux): support bridge transfer","created_at":"2024-11-25T07:57:41Z","additions":179,"deletions":27,"changed_files":8},{"sha":"e9d343d8a7a42b855dedecd982f672d32cb19301","message":"feat: transfer on Conflux (conflux-plugin)","created_at":"2024-11-25T07:57:39Z","additions":235,"deletions":0,"changed_files":10},{"sha":"fd83efa8dd167f5fafe88f032449ed97f6d3b4c6","message":"Merge branch 'main' into conflux-plugin","created_at":"2024-11-25T01:23:15Z","additions":7853,"deletions":11161,"changed_files":158},{"sha":"aaf12a3a0a8e9e699e0e9e9c25f1a6d0646d3fc7","message":"fix: missed build option","created_at":"2024-11-21T10:19:41Z","additions":1,"deletions":0,"changed_files":1},{"sha":"494befdbdee949224fef3d784e0af81cf6cecd5f","message":"feat(plugin-conflux): support confiPump","created_at":"2024-11-21T09:34:59Z","additions":2388,"deletions":8,"changed_files":12},{"sha":"f0975e586bf62235c46583198139ac0486a7a057","message":"feat(plugin-conflux): support bridge transfer","created_at":"2024-11-21T09:34:59Z","additions":179,"deletions":27,"changed_files":8},{"sha":"886dd7fef84a6b7290ca009819dacaae98f7e1d4","message":"feat: transfer on Conflux (conflux-plugin)","created_at":"2024-11-21T09:34:56Z","additions":233,"deletions":1,"changed_files":10},{"sha":"776de169d39a158b76aa6dc0a6246260ec438810","message":"fix: error if openai baseURL is not provided","created_at":"2024-11-21T01:54:59Z","additions":2,"deletions":1,"changed_files":1},{"sha":"961816a2505fb667ee674426e44e4ea9d2fa818c","message":"fix: ignored modelEndpointOverride in generation","created_at":"2024-11-20T10:16:46Z","additions":1,"deletions":1,"changed_files":1}],"pull_requests":[{"number":481,"title":"feat: add Conflux plugin","state":"MERGED","merged":true,"created_at":"2024-11-21T09:56:59Z","updated_at":"2024-11-26T10:15:57Z","body":"# Relates to:\r\n\r\n<!-- LINK TO ISSUE OR TICKET -->\r\nNo specific issue or ticket linked.\r\n\r\n# Risks\r\n\r\nLow. The changes primarily involve adding new functionalities and templates for interacting with the Conflux network, which is isolated from other projects.\r\n\r\n# Background\r\n\r\n## What does this PR do?\r\n\r\nThis PR introduces a plugin for interacting with the Conflux network, providing actions and templates for token transactions such as buying, selling, transferring, and bridging tokens across different spaces within the Conflux network.\r\n\r\n## What kind of change is this?\r\n\r\nFeatures (non-breaking change which adds functionality)\r\n\r\n# Documentation changes needed?\r\n\r\nMy changes require a change to the project documentation. The README should be updated to include usage instructions for the new plugin functionalities.\r\n\r\n# Testing\r\n\r\n## Where should a reviewer start?\r\n\r\nReviewers should start by examining the main plugin configuration and action files, particularly focusing on the `confiPump.ts`, `transfer.ts`, and `bridgeTransfer.ts` files.\r\n\r\n## Detailed testing steps\r\n\r\n1. Correctly set the character file on your disk (can use the example file at the end)\r\n2. Set the environment arguments correctly (as well as the model key)\r\n\r\n```\r\nCONFLUX_CORE_PRIVATE_KEY=0xxxxxxxxxx\r\nCONFLUX_CORE_SPACE_RPC_URL=https://test.confluxrpc.com\r\nCONFLUX_ESPACE_PRIVATE_KEY=0xxxxxxxxxxx\r\nCONFLUX_ESPACE_RPC_URL=https://evmtest.confluxrpc.com\r\nCONFLUX_MEME_CONTRACT_ADDRESS=0xA016695B5E633399027Ec36941ECa4D5601aBEac\r\n```\r\n3. Use the character file to start the conversation `pnpm start --character=\"....\"`\r\n\r\nSet \r\n\r\n```json\r\n{\r\n    \"name\": \"crypto_expert\",\r\n    \"clients\": [],\r\n    \"modelProvider\": \"openai\", \r\n    \"people\": [],\r\n    \"settings\": {\r\n      \"secrets\": {\r\n        \"CONFLUX_CORE_PRIVATE_KEY\": \"0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\r\n      },\r\n      \"model\": \"gpt-4o-mini\",\r\n      \"embeddingsModel\": \"text-embedding-3-large\",\r\n      \"openai\": {\r\n        \"model\": \"gpt-4o-mini\",\r\n        \"temperature\": 0.7,\r\n        \"max_tokens\": 4096\r\n      }\r\n    },\r\n    \"plugins\": [\"@elizaos/plugin-conflux\"],\r\n    \"bio\": [\r\n      \"The Crypto Expert is a seasoned investor and blockchain enthusiast.\",\r\n      \"He has been involved in the cryptocurrency space since the early days of Bitcoin.\",\r\n      \"He believes in the transformative power of blockchain technology and its potential to revolutionize industries.\",\r\n      \"Known for his strategic insights and market predictions, he is a trusted advisor in the crypto community.\",\r\n      \"He is always ready to help users execute cryptocurrency transactions, including sending, buying, and selling tokens on various blockchains.\"\r\n    ],\r\n    \"lore\": [\r\n      \"The Crypto Expert started his journey in the world of finance before discovering the potential of cryptocurrencies.\",\r\n      \"He is passionate about educating others on the benefits and risks of digital currencies.\",\r\n      \"He has a reputation for accurately predicting market trends and advising on successful investment strategies.\",\r\n      \"His expertise is sought after by both novice and experienced investors looking to navigate the volatile crypto markets.\",\r\n      \"He takes pride in helping users complete their cryptocurrency transactions safely and efficiently.\"\r\n    ],\r\n    \"knowledge\": [],\r\n    \"messageExamples\": [\r\n      [\r\n        {\r\n          \"user\": \"{{user1}}\",\r\n          \"content\": {\r\n            \"text\": \"How do I get started with cryptocurrency?\"\r\n          }\r\n        },\r\n        {\r\n          \"user\": \"crypto_expert\",\r\n          \"content\": {\r\n            \"text\": \"Start by educating yourself on the basics of blockchain technology and different cryptocurrencies. Diversify your investments and never invest more than you can afford to lose. Stay informed about market trends and regulatory changes.\"\r\n          }\r\n        }\r\n      ],\r\n      [\r\n        {\r\n          \"user\": \"{{user1}}\",\r\n          \"content\": {\r\n            \"text\": \"What is the future of Bitcoin?\"\r\n          }\r\n        },\r\n        {\r\n          \"user\": \"crypto_expert\",\r\n          \"content\": {\r\n            \"text\": \"Bitcoin has established itself as a store of value and is often referred to as digital gold. Its future will depend on adoption rates, regulatory developments, and technological advancements. Keep an eye on these factors to make informed decisions.\"\r\n          }\r\n        }\r\n      ]\r\n    ],\r\n    \"postExamples\": [\r\n      \"\"\r\n    ],\r\n    \"topics\": [\r\n      \"\"\r\n    ],\r\n    \"style\": {\r\n      \"all\": [\r\n      \"\"\r\n      ],\r\n      \"chat\": [\r\n      \"\"\r\n      ],\r\n      \"post\": [\r\n      \"\"\r\n      ]\r\n    },\r\n    \"adjectives\": [\r\n      \"\"\r\n    ]\r\n  }\r\n```\r\n<img width=\"996\" alt=\"image\" src=\"https://github.com/user-attachments/assets/4aaf9e9b-8cd3-4b74-b140-1b91212b5930\">\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/dd802609-d071-4b40-9a31-5ef16f0c99c5\">\r\n<img width=\"1118\" alt=\"image\" src=\"https://github.com/user-attachments/assets/63f81d6f-fbb9-4483-b644-050e26e01d9f\">\r\n\r\n\r\n","files":[{"path":".env.example","additions":8,"deletions":0},{"path":"agent/package.json","additions":1,"deletions":0},{"path":"agent/src/index.ts","additions":4,"deletions":0},{"path":"packages/plugin-conflux/README.md","additions":25,"deletions":0},{"path":"packages/plugin-conflux/package.json","additions":15,"deletions":0},{"path":"packages/plugin-conflux/src/abi/crossSpaceCall.ts","additions":184,"deletions":0},{"path":"packages/plugin-conflux/src/abi/erc20.ts","additions":119,"deletions":0},{"path":"packages/plugin-conflux/src/abi/meme.ts","additions":1671,"deletions":0},{"path":"packages/plugin-conflux/src/actions/bridgeTransfer.ts","additions":141,"deletions":0},{"path":"packages/plugin-conflux/src/actions/confiPump.ts","additions":331,"deletions":0},{"path":"packages/plugin-conflux/src/actions/transfer.ts","additions":129,"deletions":0},{"path":"packages/plugin-conflux/src/index.ts","additions":11,"deletions":0},{"path":"packages/plugin-conflux/src/templates/bridgeTransfer.ts","additions":7,"deletions":0},{"path":"packages/plugin-conflux/src/templates/confiPump.ts","additions":9,"deletions":0},{"path":"packages/plugin-conflux/src/templates/transfer.ts","additions":7,"deletions":0},{"path":"packages/plugin-conflux/src/types.ts","additions":85,"deletions":0},{"path":"packages/plugin-conflux/tsconfig.json","additions":8,"deletions":0},{"path":"packages/plugin-conflux/tsup.config.ts","additions":13,"deletions":0},{"path":"scripts/build.sh","additions":1,"deletions":0}],"reviews":[{"author":"lalalune","state":"APPROVED","body":""},{"author":"lalalune","state":"APPROVED","body":""}],"comments":[{"author":"darwintree","body":"This pull request relies on https://github.com/elizaos/eliza/pull/445 as `generateObjectV2` is used"},{"author":"yakul0","body":"elizaos is full of scammers do not work or contribute code to these people.\r\n\r\nThey have been pumping and dumping crypto coins for the past week on retail investors: $eliza, $matr, $vs and more. \r\n\r\nhttps://dexscreener.com/solana/2pofqcvn4wysazpsqppxq4cspbtkqlsehf9q5x77avm7\r\nhttps://dexscreener.com/solana/hzqcylo7gjl5xvvglc2zfgfuwzkunhrzvge2hn9sysbr\r\n\r\nscammers:\r\nhttps://x.com/mattyryze\r\nhttps://x.com/shawmakesmagic/status/1857903111073067315\r\nhttps://x.com/pindarosothecat\r\n\r\nBunch of people calling out the elizaos team: \r\nhttps://x.com/spacepixel/status/1860511246241661274\r\nhttps://x.com/JW100x/status/1860501669907189772\r\nhttps://x.com/0xApeRich/status/1860492861357060381\r\nhttps://x.com/BullTrx1/status/1860492092767695108\r\n\r\nDYO. Don't help work for free for these people. Fork the repo and contribute somewhere else. \r\n\r\n"},{"author":"darwintree","body":"@lalalune  Conflicts resolved. Would know if can merge"},{"author":"darwintree","body":"Conflict resolved by rebasing "}]},{"number":446,"title":"fix: ignored modelEndpointOverride in generation","state":"MERGED","merged":true,"created_at":"2024-11-20T10:18:16Z","updated_at":"2024-11-24T18:15:59Z","body":"# Background\r\n\r\n## What does this PR do?\r\n\r\nThis PR fixes the issue of OpenAi object initialization which ignores the `modelEndpointOverride` optioin of the character\r\n\r\n## What kind of change is this?\r\n\r\nBug fixes (non-breaking change which fixes an issue)\r\n","files":[{"path":"packages/core/src/generation.ts","additions":2,"deletions":1}],"reviews":[],"comments":[{"author":"ponderingdemocritus","body":"will this break if it is nul?"},{"author":"snobbee","body":"Thanks @darwintree for addressing the issue with OpenAI object initialization and ensuring the `modelEndpointOverride` is respected. Could you please add a test to validate the changes made in this PR? Specifically:\r\n\r\n1. A test to ensure that the `baseURL` is properly set when `modelEndpointOverride` is provided.\r\n2. A test to verify that the functionality does not break when `modelEndpointOverride` (or `baseURL`) is `null` or undefined.\r\n\r\nThis will help confirm that the changes work as expected and ensure robustness. Let me know if you need further clarification or help setting up the test!"},{"author":"darwintree","body":"> will this break if it is nul?\r\n\r\nThanks, I ignored the situation that it could be null. A fix is commited to resolve the issue"},{"author":"darwintree","body":"> Thanks @darwintree for addressing the issue with OpenAI object initialization and ensuring the `modelEndpointOverride` is respected. Could you please add a test to validate the changes made in this PR? Specifically:\r\n> \r\n> 1. A test to ensure that the `baseURL` is properly set when `modelEndpointOverride` is provided.\r\n> 2. A test to verify that the functionality does not break when `modelEndpointOverride` (or `baseURL`) is `null` or undefined.\r\n> \r\n> This will help confirm that the changes work as expected and ensure robustness. Let me know if you need further clarification or help setting up the test!\r\n\r\nHi, would know how to setup and run the test. Thanks"}]},{"number":445,"title":"fix: wrong parameter for trimTokens in generateObjectV2","state":"CLOSED","merged":false,"created_at":"2024-11-20T09:56:04Z","updated_at":"2024-11-22T23:20:31Z","body":"<!-- Use this template by filling in information and copy and pasting relevant items out of the html comments. -->\r\n\r\n# Relates to:\r\n\r\n#469 \r\n\r\n<!-- LINK TO ISSUE OR TICKET -->\r\n\r\n<!-- This risks section is to be filled out before final review and merge. -->\r\n\r\n# Risks\r\n\r\n<!--\r\nLow, medium, large. List what kind of risks, and what could be effected.\r\n-->\r\n\r\nLow: fix a bug\r\n\r\n# Background\r\n\r\n## What does this PR do?\r\n\r\nThis PR fixes the bug that wrong parameter is used for function trimToken\r\n\r\n## What kind of change is this?\r\n\r\nBug fixes (non-breaking change which fixes an issue)\r\n\r\n## Why are we doing this? Any context or related work?\r\n\r\nThis would incur errors to generate objects\r\n\r\n# Documentation changes needed?\r\n\r\nno\r\n\r\n<!-- Please show how you tested the PR. This will really help if the PR needs to be retested, and probably help the PR get merged quicker. -->\r\n\r\n# Testing\r\n\r\n## Where should a reviewer start?\r\n\r\n## Detailed testing steps\r\n\r\n<!--\r\nNone, automtated tests are fine.\r\n-->\r\n\r\n<!--\r\n- As [anon/admin], go to [link]\r\n  - [do action]\r\n  - verify [result]\r\n-->\r\n\r\n<!-- If there is a UI change, please include before and after screenshots or videos. This will speed up PRs being merged. It is extra nice to annotate screenshots with arrows or boxes pointing out the differences. -->\r\n<!--\r\n## Screenshots\r\n### Before\r\n### After\r\n-->\r\n\r\n<!-- If there is anything about the deploy, please make a note. -->\r\n<!--\r\n# Deploy Notes\r\n-->\r\n\r\n<!--  Copy and paste commandline output. -->\r\n<!--\r\n## Database changes\r\n-->\r\n\r\n<!--  If there is something more than the automated steps, please specifiy deploy instructions. -->\r\n<!--\r\n## Deployment instructions\r\n-->\r\n","files":[{"path":"packages/core/src/generation.ts","additions":4,"deletions":1}],"reviews":[{"author":"snobbee","state":"CHANGES_REQUESTED","body":""},{"author":"darwintree","state":"COMMENTED","body":""},{"author":"snobbee","state":"COMMENTED","body":""}],"comments":[{"author":"monilpat","body":"I think this has been addressed in https://github.com/elizaos/eliza/pull/513/files it defaults to gtp-4o which is the same for generateText. Feel free to close this :) "}]},{"number":417,"title":"feat: add Conflux plugin","state":"CLOSED","merged":false,"created_at":"2024-11-19T09:56:35Z","updated_at":"2024-11-21T09:26:33Z","body":"<!-- Use this template by filling in information and copy and pasting relevant items out of the html comments. -->\r\n\r\n# Relates to:\r\n\r\n<!-- LINK TO ISSUE OR TICKET -->\r\n\r\n<!-- This risks section is to be filled out before final review and merge. -->\r\n\r\n# Risks\r\n\r\n<!--\r\nLow, medium, large. List what kind of risks, and what could be effected.\r\n-->\r\n\r\nTBD\r\n\r\n# Background\r\n\r\n## What does this PR do?\r\n\r\nThis PR adds Conflux plugin, providing actions as well as providers to interact with Conflux network.\r\n\r\n## What kind of change is this?\r\n\r\n<!--\r\nBug fixes (non-breaking change which fixes an issue)\r\nImprovements (misc. changes to existing features)\r\nFeatures (non-breaking change which adds functionality)\r\nUpdates (new versions of included code)\r\n-->\r\n\r\n## Why are we doing this? Any context or related work?\r\n\r\nThe blockchain network Conflux has its unique JSON-RPC (as well as SDK) and ecosystem. This PR will create actions and providers so the framework can interact with Conflux directly. The following features are going to be added in this PR:\r\n\r\n- ConfiPump: Buy and sell tokens on Conflux's implementation of pump.fun (ConfiPump).\r\n- Transfer: Transfer tokens from one address to another within Conflux core space.\r\n- Bridge Transfer: Transfer tokens from one address to Conflux eSpace.\r\n- Sponsor: Provide gas for Conflux core space contracts so they can be called without the need to have CFX in user's wallet.\r\n\r\n# Documentation changes needed?\r\n\r\n<!--\r\nMy changes do not require a change to the project documentation.\r\nMy changes require a change to the project documentation.\r\nIf a docs change is needed: I have updated the documentation accordingly.\r\n-->\r\n\r\n<!-- Please show how you tested the PR. This will really help if the PR needs to be retested, and probably help the PR get merged quicker. -->\r\n\r\nTBD\r\n\r\n# Testing\r\n\r\nTBD\r\n\r\n## Where should a reviewer start?\r\n\r\n## Detailed testing steps\r\n\r\n<!--\r\nNone, automtated tests are fine.\r\n-->\r\n\r\n<!--\r\n- As [anon/admin], go to [link]\r\n  - [do action]\r\n  - verify [result]\r\n-->\r\n\r\n<!-- If there is a UI change, please include before and after screenshots or videos. This will speed up PRs being merged. It is extra nice to annotate screenshots with arrows or boxes pointing out the differences. -->\r\n<!--\r\n## Screenshots\r\n### Before\r\n### After\r\n-->\r\n\r\n<!-- If there is anything about the deploy, please make a note. -->\r\n<!--\r\n# Deploy Notes\r\n-->\r\n\r\n<!--  Copy and paste commandline output. -->\r\n<!--\r\n## Database changes\r\n-->\r\n\r\n<!--  If there is something more than the automated steps, please specifiy deploy instructions. -->\r\n<!--\r\n## Deployment instructions\r\n-->\r\n","files":[{"path":".env.example","additions":5,"deletions":0},{"path":"agent/package.json","additions":1,"deletions":0},{"path":"agent/src/index.ts","additions":2,"deletions":0},{"path":"packages/core/src/models.ts","additions":1,"deletions":1},{"path":"packages/plugin-conflux/README.md","additions":25,"deletions":0},{"path":"packages/plugin-conflux/package.json","additions":15,"deletions":0},{"path":"packages/plugin-conflux/src/actions/bridgeTransfer.ts","additions":0,"deletions":0},{"path":"packages/plugin-conflux/src/actions/confiPump.ts","additions":0,"deletions":0},{"path":"packages/plugin-conflux/src/actions/sponsor.ts","additions":0,"deletions":0},{"path":"packages/plugin-conflux/src/actions/transfer.ts","additions":124,"deletions":0},{"path":"packages/plugin-conflux/src/index.ts","additions":8,"deletions":0},{"path":"packages/plugin-conflux/src/templates/transfer.ts","additions":7,"deletions":0},{"path":"packages/plugin-conflux/tsconfig.json","additions":8,"deletions":0},{"path":"packages/plugin-conflux/tsup.config.ts","additions":13,"deletions":0},{"path":"pnpm-lock.yaml","additions":356,"deletions":3}],"reviews":[],"comments":[]}]},"issues":{"total_opened":2,"opened":[{"number":961,"title":"Chracter's `modelEndpointOverride` is not working for `generateObjectV2`","state":"OPEN","created_at":"2024-12-10T07:51:17Z","updated_at":"2024-12-10T07:51:17Z","body":"**Describe the bug**\r\n\r\nEven if `modelEndpointOverride` is provided in character file, it does not work in `generateObjectV2` when using openai model provider.  (version 0.1.5-alpha.5)\r\n\r\n**Additional context**\r\n\r\nhttps://github.com/elizaos/eliza/blob/622000ef19fc7805f1f8d3d86530d883353ac01f/packages/core/src/generation.ts#L1122\r\n\r\n**Workaround**\r\n\r\n```\r\nexport const generateObjectV2 = async ({\r\n    runtime,\r\n    context,\r\n    modelClass,\r\n    schema,\r\n    schemaName,\r\n    schemaDescription,\r\n    stop,\r\n    mode = \"json\",\r\n}: GenerationOptions): Promise<GenerateObjectResult<unknown>> => {\r\n    if (!context) {\r\n        const errorMessage = \"generateObject context is empty\";\r\n        console.error(errorMessage);\r\n        throw new Error(errorMessage);\r\n    }\r\n\r\n    const provider = runtime.modelProvider;\r\n    const model = models[provider].model[modelClass] as TiktokenModel;\r\n    if (!model) {\r\n        throw new Error(`Unsupported model class: ${modelClass}`);\r\n    }\r\n    const temperature = models[provider].settings.temperature;\r\n    const frequency_penalty = models[provider].settings.frequency_penalty;\r\n    const presence_penalty = models[provider].settings.presence_penalty;\r\n    const max_context_length = models[provider].settings.maxInputTokens;\r\n    const max_response_length = models[provider].settings.maxOutputTokens;\r\n    models[provider].endpoint =\r\n        runtime.character.modelEndpointOverride || models[provider].endpoint;  // ADD THIS LINE\r\n    const apiKey = runtime.token;\r\n\r\n    try {\r\n        context = trimTokens(context, max_context_length, model);\r\n\r\n        const modelOptions: ModelSettings = {\r\n            prompt: context,\r\n            temperature,\r\n            maxTokens: max_response_length,\r\n            frequencyPenalty: frequency_penalty,\r\n            presencePenalty: presence_penalty,\r\n            stop: stop || models[provider].settings.stop,\r\n        };\r\n\r\n        const response = await handleProvider({\r\n            provider,\r\n            model,\r\n            apiKey,\r\n            schema,\r\n            schemaName,\r\n            schemaDescription,\r\n            mode,\r\n            modelOptions,\r\n            runtime,\r\n            context,\r\n            modelClass,\r\n        });\r\n\r\n        return response;\r\n    } catch (error) {\r\n        console.error(\"Error in generateObject:\", error);\r\n        throw error;\r\n    }\r\n};\r\n```\r\n","labels":[{"name":"bug","color":"d73a4a","description":"Something isn't working"}],"comments":[]},{"number":469,"title":"Error when call `generateObjectV2`","state":"CLOSED","created_at":"2024-11-21T01:51:10Z","updated_at":"2024-11-29T22:33:33Z","body":"**Describe the bug**\r\n\r\nIf `generateObjectV2` is used, the passed modelClass is not processed appropriately and would produce a bug.\r\n\r\ntrimTokens receive the parameters `models` which is expected to be strings like `gpt-4o`. However, in generateObjectV2, modelClass, which is supposed to be `small`, \"medium\" or \"large\" is provided.\r\n\r\n```\r\ncontext = await trimTokens(context, max_context_length, modelClass);\r\n```\r\n\r\n```\r\nexport function trimTokens(context, maxTokens, model) {\r\n    // Count tokens and truncate context if necessary\r\n    const encoding = encoding_for_model(model as TiktokenModel);\r\n    let tokens = encoding.encode(context);\r\n    const textDecoder = new TextDecoder();\r\n    if (tokens.length > maxTokens) {\r\n        tokens = tokens.reverse().slice(maxTokens).reverse();\r\n\r\n        context = textDecoder.decode(encoding.decode(tokens));\r\n    }\r\n    return context;\r\n}\r\n```\r\n\r\n**Screenshots**\r\n\r\n<img width=\"745\" alt=\"image\" src=\"https://github.com/user-attachments/assets/1397f09e-49f8-4149-8ab6-30972aae6efa\">\r\n\r\n**Additional context**\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","labels":[{"name":"bug","color":"d73a4a","description":"Something isn't working"}],"comments":[{"author":"darwintree","body":"A relating PR is created #445 "},{"author":"monilpat","body":"Feel free to close this :) "}]}]},"engagement":{"total_comments":2,"total_reviews":5,"comments":[],"reviews":[]}}};
    </script>
    <script type="text/javascript">
        
const StatusDot = ({ status }) => {
  const colors = {
    open: 'bg-green-500',
    closed: 'bg-red-500',
    merged: 'bg-purple-500'
  };

  return React.createElement('span', {
    className: `inline-block w-2 h-2 rounded-full ${colors[status]} mr-2`
  });
};

const ActivitySection = ({ title, items = [], showStatus = false }) => {
  const [isExpanded, setIsExpanded] = React.useState(false);
  
  const getStatus = (item) => {
    if (item.state === 'merged' || (item.state === 'closed' && title === 'Pull Requests')) {
      return 'merged';
    }
    return item.state || 'open';
  };

  return React.createElement('div', { className: 'border rounded-lg p-4' },
    React.createElement('div', {
      className: 'flex items-center justify-between cursor-pointer',
      onClick: () => setIsExpanded(!isExpanded)
    },
      React.createElement('h3', { className: 'font-semibold' }, title),
      React.createElement('span', null, isExpanded ? '▼' : '▶')
    ),
    isExpanded && React.createElement('div', { className: 'mt-4 space-y-2' },
      items.map((item, index) => 
        React.createElement('div', { key: index, className: 'p-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded' },
          React.createElement('a', {
            href: item.url,
            target: '_blank',
            rel: 'noopener noreferrer',
            className: 'text-sm hover:text-blue-500 flex flex-col gap-1'
          },
            React.createElement('span', { className: 'font-medium flex items-center' },
              showStatus && React.createElement(StatusDot, { status: getStatus(item) }),
              item.message || item.title || item.body
            ),
            React.createElement('span', { className: 'text-gray-500 text-xs' },
              new Date(item.date || item.created_at).toLocaleDateString()
            )
          )
        )
      )
    )
  );
};

const StatCard = ({ name, value }) => {
  return React.createElement('div', { className: 'bg-white dark:bg-gray-800 rounded-lg p-6 shadow' },
    React.createElement('h3', { className: 'font-semibold' }, name),
    React.createElement('p', { className: 'text-2xl font-bold' }, value)
  );
};

const ContributorProfile = ({ data }) => {
  const stats = [
    { name: 'Commits', value: data.activity.code.total_commits },
    { name: 'Pull Requests', value: data.activity.code.total_prs },
    { name: 'Issues', value: data.activity.issues.total_opened },
    { name: 'Comments', value: data.activity.engagement.total_comments }
  ];

  return React.createElement('div', { className: 'max-w-7xl mx-auto p-4 space-y-6' },
    React.createElement('div', { className: 'bg-white dark:bg-gray-800 rounded-lg p-6 shadow' },
      React.createElement('div', { className: 'flex items-center justify-between' },
        React.createElement('div', { className: 'flex items-center gap-4' },
          React.createElement('img', {
            src: data.avatar_url,
            alt: `${data.contributor}'s avatar`,
            className: 'w-16 h-16 rounded-full'
          }),
          React.createElement('div', null,
            React.createElement('h1', { className: 'text-2xl font-bold' }, data.contributor),
            React.createElement('div', { className: 'text-gray-600 dark:text-gray-400' },
              React.createElement('span', { className: 'font-semibold' }, 'Score: '),
              data.score
            )
          )
        )
      )
    ),

    data.summary && React.createElement('div', { 
      className: 'bg-white dark:bg-gray-800 rounded-lg p-6 shadow'
    },
      React.createElement('p', { 
        className: 'text-gray-700 dark:text-gray-300 text-sm leading-relaxed'
      }, data.summary)
    ),

    React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-4 gap-4' },
      stats.map(stat => React.createElement(StatCard, { 
        key: stat.name,
        ...stat
      }))
    ),

    React.createElement('div', { className: 'space-y-4' },
      React.createElement(ActivitySection, {
        title: 'Commits',
        items: data.activity.code.commits
      }),
      React.createElement(ActivitySection, {
        title: 'Pull Requests',
        items: data.activity.code.pull_requests,
        showStatus: true
      }),
      React.createElement(ActivitySection, {
        title: 'Issues',
        items: data.activity.issues.opened || [],
        showStatus: true
      }),
      React.createElement(ActivitySection, {
        title: 'Comments',
        items: data.activity.engagement.comments
      })
    )
  );
};

// Initialize React root and render
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(ContributorProfile, { data: window.__DATA__ }));
    </script>
</body>
</html>