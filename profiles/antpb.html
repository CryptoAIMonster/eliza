
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>antpb - GitHub Contributions</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 dark:bg-gray-900">
    <div id="root"><div class="max-w-7xl mx-auto p-4 space-y-6"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><img src="https://avatars.githubusercontent.com/u/8985705?u=d37d2d1711a30fbe6d13131527604a1e3457282c&amp;v=4" alt="antpb&#x27;s avatar" class="w-16 h-16 rounded-full"/><div><h1 class="text-2xl font-bold">antpb</h1><div class="text-gray-600 dark:text-gray-400"><span class="font-semibold">Score: </span>66</div></div></div><div class="text-3xl font-bold text-blue-600 dark:text-blue-400">66</div></div></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><p class="text-gray-700 dark:text-gray-300 text-sm leading-relaxed">Antpb is actively improving the build process for non-node environments by addressing compatibility issues, particularly focusing on workers. This includes migrating from `tiktoken` to `js-tiktoken`, and wrapping certain functions like `fastembed` in try-catch blocks to ensure smooth operation across different platforms.</p></div><div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Commits</h3><p class="text-2xl font-bold">6</p></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Pull Requests</h3><p class="text-2xl font-bold">3</p></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Issues</h3><p class="text-2xl font-bold">2</p></div><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow"><h3 class="font-semibold">Comments</h3><p class="text-2xl font-bold">3</p></div></div><div class="space-y-4"><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Commits</h3><span>▶</span></div></div><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Pull Requests</h3><span>▶</span></div></div><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Issues</h3><span>▶</span></div></div><div class="border rounded-lg p-4"><div class="flex items-center justify-between cursor-pointer"><h3 class="font-semibold">Comments</h3><span>▶</span></div></div></div></div></div>
    <script>
        window.__DATA__ = {"contributor":"antpb","score":66,"summary":"Antpb is actively improving the build process for non-node environments by addressing compatibility issues, particularly focusing on workers. This includes migrating from `tiktoken` to `js-tiktoken`, and wrapping certain functions like `fastembed` in try-catch blocks to ensure smooth operation across different platforms.","avatar_url":"https://avatars.githubusercontent.com/u/8985705?u=d37d2d1711a30fbe6d13131527604a1e3457282c&v=4","activity":{"code":{"total_commits":6,"total_prs":3,"commits":[{"sha":"8a8586a1326b9cc86773c307c968cdd9dc02191f","message":"fix lint error","created_at":"2024-11-30T09:23:47Z","additions":2,"deletions":2,"changed_files":1},{"sha":"5b7407031381b57bd3259b9c55ca7e37d7160606","message":"move import to the nodejs condition check","created_at":"2024-11-30T09:16:25Z","additions":26,"deletions":7,"changed_files":1},{"sha":"a952fa798ce7c656643cada6a85e7466e9dc7feb","message":"migrates tiktoken implementation to js-tiktoken","created_at":"2024-11-30T05:34:39Z","additions":401,"deletions":101,"changed_files":4},{"sha":"a0c2bb8fd06423cdc05a075bfa0d5f7223a62754","message":"fix other eliza error","created_at":"2024-11-22T04:14:43Z","additions":2,"deletions":2,"changed_files":1},{"sha":"73a4bfd31996aecf1b65e5fc298cfbbdde18ef77","message":"consistent error","created_at":"2024-11-22T04:12:58Z","additions":1,"deletions":1,"changed_files":1},{"sha":"90f56760e05db20ab8e12320afb4c5f1ef5d7648","message":"wrap in try to allow non node env to build","created_at":"2024-11-22T04:06:10Z","additions":27,"deletions":9,"changed_files":1}],"pull_requests":[{"number":709,"title":"fix: move `fastembed` import to the isnode condition check","state":"MERGED","merged":true,"created_at":"2024-11-30T09:19:24Z","updated_at":"2024-11-30T23:35:19Z","body":"In current state it looks like we had a bit of a regression importing `fastembed` at the top level again, which causes build failures in non-Node environments due to native dependencies (.node files) like Cloudflare Workers and other edge workers. \r\n\r\nThis PR:\r\n- Removes top-level import of `EmbeddingModel` from `fastembed`\r\n- Dynamically imports fastembed package only when local embeddings are needed\r\n- Ensures native modules are only loaded in Node.js environment\r\n\r\nThis allows the package to be built for both browser and Node.js environments while maintaining all existing functionality.\r\n\r\nTesting:\r\n- Confirm local embeddings still work in Node.js\r\n- Verify builds succeed in browser/Cloudflare Worker environments (done!)\r\n- Maintained original behavior for remote embedding fallbacks\r\n","files":[{"path":"packages/core/src/embedding.ts","additions":26,"deletions":7}],"reviews":[],"comments":[{"author":"augchan42","body":"Sorry, that change was from me.  Now I understand why it's needed."},{"author":"shakkernerd","body":"Great!"}]},{"number":703,"title":"fix: Switch from tiktoken to js-tiktoken for worker compatibility","state":"MERGED","merged":true,"created_at":"2024-11-30T05:42:38Z","updated_at":"2024-11-30T06:57:18Z","body":"<!-- Use this template by filling in information and copy and pasting relevant items out of the html comments. -->\r\n\r\n# Relates to:\r\nEliza currently uses `tiktoken` which relies on WASM bindings. This causes build failures in Cloudflare Workers and other edge runtime environments where WASM support is limited or unavailable. This PR migrates the token truncation functionality from `tiktoken` to `js-tiktoken`, which is a pure JavaScript implementation of the same tokenization logic. This change removes the WASM dependency while maintaining the same tokenization functionality.\r\n\r\n\r\n# Risks\r\n\r\nSeems the collaborator on both packages are the same person so this should be a trusted package. (verify pls)\r\nhttps://www.npmjs.com/package/js-tiktoken\r\nhttps://www.npmjs.com/package/tiktoken \r\n\r\n# Background\r\n\r\n## What does this PR do?\r\nThis PR migrates the token truncation functionality from `tiktoken` to `js-tiktoken`, which is a pure JavaScript implementation of the same tokenization logic. This change removes the WASM dependency while maintaining the same tokenization functionality.\r\n\r\n## What kind of change is this?\r\nPretty beefy package change and maybe opinionated but id be willing to defend the change if anyone objects. :)\r\n\r\nKey changes:\r\n- Replace `tiktoken` import with `js-tiktoken`\r\n- Remove unnecessary `TextDecoder` usage since `js-tiktoken.decode()` returns strings directly\r\n- Remove `encoding.free()` call as JavaScript handles memory management\r\n- Update types to match `js-tiktoken` interfaces\r\n\r\n## Why are we doing this? Any context or related work?\r\nEdge compat is gud. \r\n- Enables deployment to edge runtimes like Cloudflare Workers\r\n- Maintains same tokenization functionality and accuracy\r\n- Reduces bundle size by removing WASM dependency\r\n- Simplifies deployment by removing need for WASM file handling\r\n\r\n# Documentation changes needed?\r\n\r\n<!--\r\nMy changes do not require a change to the project documentation.\r\nMy changes require a change to the project documentation.\r\nIf a docs change is needed: I have updated the documentation accordingly.\r\n-->\r\n\r\n<!-- Please show how you tested the PR. This will really help if the PR needs to be retested, and probably help the PR get merged quicker. -->\r\n\r\n# Testing\r\n\r\n## Where should a reviewer start?\r\nTake a look at the included test file for instructions on how to use it.\r\n\r\nThe automated tests have been done to ensure it:\r\n- Correctly truncates text to specified token limits\r\n- Handles edge cases (empty strings, invalid inputs)\r\n- Maintains proper error handling\r\n- Works in worker environments\r\n\r\n\r\n<!-- If you are on Discord, please join https://discord.gg/elizaos and state your Discord username here for contribute role and join us in #development-feed -->\r\n## Discord username\r\nantpb\r\n","files":[{"path":"packages/core/package.json","additions":1,"deletions":1},{"path":"packages/core/src/generation.ts","additions":4,"deletions":8},{"path":"packages/core/src/tests/generation.test.ts","additions":52,"deletions":1},{"path":"pnpm-lock.yaml","additions":344,"deletions":91}],"reviews":[],"comments":[]},{"number":508,"title":"Wrap `fastembed` in try catch to allow non node environments to build","state":"MERGED","merged":true,"created_at":"2024-11-22T04:11:24Z","updated_at":"2024-11-24T18:11:39Z","body":"<!-- Use this template by filling in information and copy and pasting relevant items out of the html comments. -->\r\n\r\n# Relates to: https://github.com/elizaos/eliza/issues/507\r\n\r\nNon node.js environments may have issues building because of some packages and how they are imported.\r\n\r\n##To Reproduce\r\n\r\nMake a worker, include eliza/core and attempt to build. It will throw an error similar to\r\n\r\n  ✘ [ERROR] No loader is configured for \".node\" files:\r\n  node_modules/@anush008/tokenizers-darwin-universal/tokenizers.darwin-universal.node\r\n\r\n      node_modules/@anush008/tokenizers/index.js:116:32:\r\n        116 │ ... nativeBinding = require('@anush008/tokenizers-darwin-universal')\r\nExpected behavior\r\n\r\n<img width=\"653\" alt=\"image\" src=\"https://github.com/user-attachments/assets/612b7cf1-0a04-4a0d-84ec-840811e4ca8d\">\r\n\r\n\r\nThis PR wraps the import in try catch to gracefully fail and allow the build. ","files":[{"path":"packages/core/src/embedding.ts","additions":27,"deletions":9}],"reviews":[{"author":"monilpat","state":"APPROVED","body":"LGTM - thanks for getting this out!"}],"comments":[]}]},"issues":{"total_opened":2,"opened":[{"number":507,"title":"Non node.js environments have issues building (workers for instance)","state":"CLOSED","created_at":"2024-11-22T04:09:18Z","updated_at":"2024-12-14T07:36:16Z","body":"**Describe the bug**\r\n\r\nNon node.js environments may have issues building because of some packages and how they are imported. \r\n\r\n**To Reproduce**\r\n\r\nMake a worker, include eliza/core and attempt to build. It will throw an error similar to \r\n\r\n```\r\n  ✘ [ERROR] No loader is configured for \".node\" files:\r\n  node_modules/@anush008/tokenizers-darwin-universal/tokenizers.darwin-universal.node\r\n\r\n      node_modules/@anush008/tokenizers/index.js:116:32:\r\n        116 │ ... nativeBinding = require('@anush008/tokenizers-darwin-universal')\r\n ```\r\n\r\n\r\n**Expected behavior**\r\n\r\nBuild successful\r\n\r\n**Screenshots**\r\n\r\n<img width=\"666\" alt=\"image\" src=\"https://github.com/user-attachments/assets/00c09f9b-0ea2-4fd9-8330-e6083ec180d8\">\r\n\r\nPR incoming","labels":[{"name":"bug","color":"d73a4a","description":"Something isn't working"}],"comments":[{"author":"AndonMitev","body":"Is this released, I'm still experiencing same issue \r\n\r\n```\r\n\"next\": \"15.0.3\",\r\n\"@elizaos/adapter-supabase\": \"0.1.4-alpha.3\",\r\n\"@elizaos/eliza\": \"0.1.4-alpha.3\",\r\n```"}]},{"number":506,"title":"Non node.js environments have issues building (workers for instance)","state":"CLOSED","created_at":"2024-11-22T04:07:31Z","updated_at":"2024-11-29T22:33:44Z","body":"**Describe the bug**\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n**To Reproduce**\r\n\r\n<!-- Steps to reproduce the behavior. -->\r\n\r\n**Expected behavior**\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n**Screenshots**\r\n\r\n<!-- If applicable, add screenshots to help explain your problem. -->\r\n\r\n**Additional context**\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","labels":[{"name":"bug","color":"d73a4a","description":"Something isn't working"}],"comments":[{"author":"yodamaster726","body":"this seems to be a dup of #507 \r\n"},{"author":"monilpat","body":"Can close :)"}]}]},"engagement":{"total_comments":3,"total_reviews":1,"comments":[],"reviews":[]}}};
    </script>
    <script type="text/javascript">
        
const StatusDot = ({ status }) => {
  const colors = {
    open: 'bg-green-500',
    closed: 'bg-red-500',
    merged: 'bg-purple-500'
  };

  return React.createElement('span', {
    className: `inline-block w-2 h-2 rounded-full ${colors[status]} mr-2`
  });
};

const ActivitySection = ({ title, items = [], showStatus = false }) => {
  const [isExpanded, setIsExpanded] = React.useState(false);
  
  const getStatus = (item) => {
    if (item.state === 'merged' || (item.state === 'closed' && title === 'Pull Requests')) {
      return 'merged';
    }
    return item.state || 'open';
  };

  return React.createElement('div', { className: 'border rounded-lg p-4' },
    React.createElement('div', {
      className: 'flex items-center justify-between cursor-pointer',
      onClick: () => setIsExpanded(!isExpanded)
    },
      React.createElement('h3', { className: 'font-semibold' }, title),
      React.createElement('span', null, isExpanded ? '▼' : '▶')
    ),
    isExpanded && React.createElement('div', { className: 'mt-4 space-y-2' },
      items.map((item, index) => 
        React.createElement('div', { key: index, className: 'p-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded' },
          React.createElement('a', {
            href: item.url,
            target: '_blank',
            rel: 'noopener noreferrer',
            className: 'text-sm hover:text-blue-500 flex flex-col gap-1'
          },
            React.createElement('span', { className: 'font-medium flex items-center' },
              showStatus && React.createElement(StatusDot, { status: getStatus(item) }),
              item.message || item.title || item.body
            ),
            React.createElement('span', { className: 'text-gray-500 text-xs' },
              new Date(item.date || item.created_at).toLocaleDateString()
            )
          )
        )
      )
    )
  );
};

const StatCard = ({ name, value }) => {
  return React.createElement('div', { className: 'bg-white dark:bg-gray-800 rounded-lg p-6 shadow' },
    React.createElement('h3', { className: 'font-semibold' }, name),
    React.createElement('p', { className: 'text-2xl font-bold' }, value)
  );
};

const ContributorProfile = ({ data }) => {
  const stats = [
    { name: 'Commits', value: data.activity.code.total_commits },
    { name: 'Pull Requests', value: data.activity.code.total_prs },
    { name: 'Issues', value: data.activity.issues.total_opened },
    { name: 'Comments', value: data.activity.engagement.total_comments }
  ];

  return React.createElement('div', { className: 'max-w-7xl mx-auto p-4 space-y-6' },
    React.createElement('div', { className: 'bg-white dark:bg-gray-800 rounded-lg p-6 shadow' },
      React.createElement('div', { className: 'flex items-center justify-between' },
        React.createElement('div', { className: 'flex items-center gap-4' },
          React.createElement('img', {
            src: data.avatar_url,
            alt: `${data.contributor}'s avatar`,
            className: 'w-16 h-16 rounded-full'
          }),
          React.createElement('div', null,
            React.createElement('h1', { className: 'text-2xl font-bold' }, data.contributor),
            React.createElement('div', { className: 'text-gray-600 dark:text-gray-400' },
              React.createElement('span', { className: 'font-semibold' }, 'Score: '),
              data.score
            )
          )
        )
      )
    ),

    data.summary && React.createElement('div', { 
      className: 'bg-white dark:bg-gray-800 rounded-lg p-6 shadow'
    },
      React.createElement('p', { 
        className: 'text-gray-700 dark:text-gray-300 text-sm leading-relaxed'
      }, data.summary)
    ),

    React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-4 gap-4' },
      stats.map(stat => React.createElement(StatCard, { 
        key: stat.name,
        ...stat
      }))
    ),

    React.createElement('div', { className: 'space-y-4' },
      React.createElement(ActivitySection, {
        title: 'Commits',
        items: data.activity.code.commits
      }),
      React.createElement(ActivitySection, {
        title: 'Pull Requests',
        items: data.activity.code.pull_requests,
        showStatus: true
      }),
      React.createElement(ActivitySection, {
        title: 'Issues',
        items: data.activity.issues.opened || [],
        showStatus: true
      }),
      React.createElement(ActivitySection, {
        title: 'Comments',
        items: data.activity.engagement.comments
      })
    )
  );
};

// Initialize React root and render
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(ContributorProfile, { data: window.__DATA__ }));
    </script>
</body>
</html>